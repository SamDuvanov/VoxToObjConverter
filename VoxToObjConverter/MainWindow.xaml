<Window x:Class="VoxToObjConverter.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Icon="assets/icon.ico"
        Title="VoxelToMeshConverter"
        Height="700" Width="1200"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="#FFF6F6F6"
        AllowDrop="True"
        Drop="Window_Drop"
        DragOver="Window_DragOver">

    <Viewbox Stretch="Uniform" StretchDirection="Both">
        <Border BorderBrush="Gray" BorderThickness="1" CornerRadius="4">
            <Grid x:Name="RootGrid" Margin="0">

                <Grid Margin="0" Height="350" Width="600">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="30" />
                        <!-- Custom title bar -->
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>

                    <!-- Custom Title Bar -->
                    <DockPanel Grid.Row="0" Background="#FF2D2D30" MouseDown="DragWindow">
                        <TextBlock Text="VoxelToMeshConverter"
                           Foreground="White" VerticalAlignment="Center"
                           Margin="10,0,0,0" FontFamily="Calibri" FontSize="10"/>
                        <DockPanel HorizontalAlignment="Right">
                            <Button Content="🗕" Width="40" Click="Minimize_Click"
                            Background="Transparent" Foreground="White" BorderThickness="0"/>
                            <Button Content="🗖" Width="40"
                            Background="Transparent" Foreground="White" BorderThickness="0"/>
                            <Button Content="✕" Width="40" Click="Close_Click"
                            Background="Transparent" Foreground="White" BorderThickness="0"/>
                        </DockPanel>
                    </DockPanel>

                    <!-- Main Content -->
                    <Grid Grid.Row="1" Margin="10">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="3*" />
                            <ColumnDefinition Width="1*" />
                        </Grid.ColumnDefinitions>

                        <!-- Drag-and-drop List + Output Directory -->
                        <Border Grid.Column="0" BorderThickness="0,0,2,2" BorderBrush="#FFD9D4D4"
                            Padding="10" Background="#FFF0F0F0" CornerRadius="4">
                            <StackPanel>
                                <TextBlock Text="Drag and drop .vox files here:" Margin="0,0,0,10" FontFamily="Corbel Light"/>
                                <ListBox Name="FileListBox" Height="200" Background="White" BorderThickness="0,0,1,1"/>

                                <!-- Output Directory -->
                                <TextBlock Text="Output Directory:" Margin="0,5,0,5" FontFamily="Corbel Light"/>
                                <DockPanel>
                                    <TextBox x:Name="OutputDirectoryTextBox" Height="25" VerticalAlignment="Center"
                                         BorderBrush="#FFB5B5B5" BorderThickness="0,0,1,1"
                                         Background="White" FontFamily="Corbel Light"
                                         Width="385" VerticalContentAlignment="Center" Padding="10,0,0,0"/>
                                    <Button Content="📁" Click="SelectOutputDirectory_Click" Width="30" Height="25"
                                        Background="#FFDFDFDF" BorderBrush="#FFD0CBCB" BorderThickness="0,0,1,1" HorizontalAlignment="Left"/>
                                </DockPanel>
                            </StackPanel>
                        </Border>

                        <!-- Side Panel -->
                        <StackPanel Grid.Column="1" Margin="10,0,0,0" VerticalAlignment="Top">
                            <Button Content="Select Files" Click="OpenFileButton_Click" Margin="0,0,0,10" Background="#FFDFDFDF" BorderBrush="#FF8D8D8D" Height="22" Foreground="#FF1A1A1A" FontFamily="Corbel Light" BorderThickness="0,0,2,2"/>
                            <TextBlock Text="Mesh Type:" Margin="0,10,0,5" FontFamily="Corbel Light"/>
                            <ComboBox Name="MeshTypeComboBox" SelectedIndex="0" Margin="0,0,0,10" TextBlock.FontFamily="Corbel Light" BorderThickness="0,0,2,2">
                                <ComboBoxItem Content="Quad Mesh"/>
                                <ComboBoxItem Content="Triangle Mesh" />
                            </ComboBox>

                            <Image Source="assets/logo.png" Height="100" Stretch="Uniform" Margin="0,8,0,0" OpacityMask="Black" />

                            <Button Content="CONVERT" Click="Convert_Click" Margin="0,19,0,0" Height="35" Background="#FF7EDFBC" Foreground="White" BorderBrush="#FF6A9576" BorderThickness="0,0,2,2" Opacity="0.87" FontWeight="Bold" FontFamily="Corbel Light"/>
                        </StackPanel>
                    </Grid>
                </Grid>

                <Grid x:Name="LoadingOverlay" Background="#80000000" Visibility="Hidden" Panel.ZIndex="100">
                    <TextBlock Text="Converting..."
                       Foreground="White"
                       FontSize="20"
                       FontWeight="Bold"
                       HorizontalAlignment="Center"
                       VerticalAlignment="Center"/>
                </Grid>
            </Grid>
        </Border>
    </Viewbox>
</Window>
